[![Python Version](https://img.shields.io/badge/python-%3E%3D3.10-blue)](https://www.python.org/)
[![License](https://img.shields.io/badge/license-MIT-green)](LICENSE)

# OpenSage

## ç›®å½•

- [ç®€ä»‹](#ç®€ä»‹)
- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [å®‰è£…éƒ¨ç½²](#å®‰è£…éƒ¨ç½²)
- [å¿«é€Ÿä½“éªŒ](#å¿«é€Ÿä½“éªŒ)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [é¡¹ç›®è¿è¡Œæ•ˆæœå›¾](#é¡¹ç›®è¿è¡Œæ•ˆæœå›¾)
- [è®¸å¯è¯](#è®¸å¯è¯)

---

## ç®€ä»‹

OpenSage AI æ˜¯ä¸€ä¸ªé¢å‘å¼€æºç”Ÿæ€çš„ **ä¸€ç«™å¼ AI Agent ç»¼åˆä½“**ã€‚å®ƒå°†åˆ†æ•£åœ¨ OpenDiggerã€GitHubã€OpenSSF Scorecard ç­‰å¤šå¹³å°çš„å­¤ç«‹æ•°æ®æ•´åˆåˆ°åŒä¸€æ¡æ™ºèƒ½æµæ°´çº¿ä¸­ï¼šç”¨æˆ·åªéœ€è‡ªç„¶è¯­è¨€æé—®ï¼Œç³»ç»Ÿå³å¯è‡ªåŠ¨å®Œæˆ **å–æ•° â†’ æ¸…æ´—ç®—åˆ† â†’ åˆ†ææ´å¯Ÿ â†’ ç”ŸæˆæŠ¥å‘Š â†’ æŒç»­ç›‘æ§** çš„å…¨é“¾è·¯æ²»ç†ã€‚

ç›¸æ¯”ä¼ ç»Ÿçš„æ•°æ®çœ‹æ¿ï¼ŒOpenSage ä¸ä»…æä¾›æ•°æ®ï¼Œæ›´å¼ºè°ƒâ€œæ²»ç†é—­ç¯â€ï¼šä»**Evidence**ï¼ˆæ•°æ®è¯æ®ï¼‰åˆ°**Prescription**ï¼ˆæ²»ç†å¤„æ–¹ï¼‰å†åˆ°**Track**ï¼ˆé—­ç¯è¿½è¸ªï¼‰ã€‚è®©å¼€æºæ²»ç†ä»â€œå‡­æ„Ÿè§‰â€èµ°å‘â€œå¯é‡åŒ–ã€å¯æ‰§è¡Œâ€ã€‚

---

## é¡¹ç›®æ ¸å¿ƒåŠŸèƒ½

### 1. ğŸ©º å¤šç»´å¥åº·ä½“æ£€ä¸ DataEase å¯è§†åŒ–

åŸºäºç‹¬åˆ›çš„ **äº”ç»´å¥åº·è¯„åˆ†æ¨¡å‹**ï¼Œä¸ºé¡¹ç›®æä¾›å…¨æ–¹ä½çš„â€œCT æ‰«æâ€ã€‚æ•°æ®ä¸ä»…ä»¥ JSON å½¢å¼è¿”å›ï¼Œè¿˜ç›´æ¥å¯¹æ¥ **DataEase** å¤§å±ï¼Œç”Ÿæˆå¯äº¤äº’çš„å¥åº·åº¦çœ‹æ¿ã€‚

**äº”ç»´è¯„åˆ†æ¨¡å‹æƒé‡ä¸æ ¸å¿ƒç®—æ³•ï¼š**

$$ \text{HealthScore} = 0.30 V + 0.25 R + 0.20 Re + 0.15 G + 0.10 S $$

- **Vitality (æ´»è·ƒåº¦ 30%)**:  
  ç»¼åˆ OpenRank å½±å“åŠ›ã€Activity æ´»è·ƒé‡ï¼ˆå¯¹æ•°è¯„åˆ†ï¼‰ã€ç¤¾åŒºå‚ä¸äººæ•°ä¸å¢é•¿ç‡ã€‚
  $$ \text{Score}\_V = \ln(1 + \text{OpenRank}) \times w_1 + \dots $$
- **Responsiveness (å“åº”åº¦ 25%)**:  
  åŸºäº **æ—¶é—´è¡°å‡å‡½æ•°** $T(h)$ è¯„ä¼° Issue/PR çš„é¦–å“æ—¶é—´ã€å…³é—­å‘¨æœŸä¸ç§¯å‹ç‡ã€‚
  $$ T(h) = \max(0, 100 \times \frac{\text{bad} - h}{\text{bad} - \text{good}}) $$
- **Resilience (éŸ§æ€§ 20%)**:  
  ç»“åˆ Bus Factorï¼ˆæ€»çº¿å› å­ï¼‰ã€è´¡çŒ®è€…å¤šæ ·æ€§ (HHI æŒ‡æ•°) ä¸ç•™å­˜ç‡ï¼Œè¯„ä¼°é¡¹ç›®æŠ—é£é™©èƒ½åŠ›ã€‚
- **Governance (æ²»ç† 15%)**:  
  æ£€æŸ¥ README/LICENSE/Contributing ç­‰æ–‡æ¡£å®Œæ•´åº¦åŠç¤¾åŒºæµç¨‹é€æ˜åº¦ã€‚
- **Security (å®‰å…¨ 10%)**:  
  é›†æˆ OpenSSF Scorecard æ ‡å‡†ï¼Œè¯„ä¼°é¡¹ç›®å®‰å…¨æ°´ä½ã€‚

[ğŸ“š æŸ¥çœ‹å®Œæ•´å¥åº·åˆ†ç®—æ³•æ–‡æ¡£](knowledge_base/Health_Score_Algorithm.md)

### å¥åº·ä½“æ£€æ•°æ®æ€»è§ˆæ•ˆæœå›¾

![alt text](image/7880dab989b21f37de61932db082705c.png)

### Dataease æ•°æ®å¤§å±æ•ˆæœå›¾

![alt text](image/531ba710b11e861a4db98be1a0bbf5c3.png)

### 2. ğŸ¤– OpenSage æ™ºèƒ½å¯¹è¯ä¸å®æ—¶æ´å¯Ÿ

æ— éœ€å­¦ä¹ å¤æ‚çš„ SQL æˆ–æŒ‡æ ‡å®šä¹‰ï¼Œç›´æ¥åƒå’¨è¯¢ä¸“å®¶ä¸€æ ·æé—®ã€‚Agent å¼•æ“ä¼šè‡ªåŠ¨ç†è§£æ„å›¾ã€è°ƒåº¦å·¥å…·é“¾ã€ç”Ÿæˆå›¾æ–‡å¹¶èŒ‚çš„åˆ†ææŠ¥å‘Šã€‚

- **å¤šæ¨¡æ€è¾“å‡º**ï¼šç»“è®º + è¯æ®å¡ (Evidence Card) + è¶‹åŠ¿å›¾ + æ²»ç†å»ºè®®ã€‚
- **ReAct é—­ç¯**ï¼šReason(æ„å›¾æ‹†è§£) â†’ Act(å·¥å…·è°ƒåº¦) â†’ Observe(æ•°æ®æ ¡éªŒ) â†’ Reflect(ç”Ÿæˆå¤„æ–¹)ã€‚
- **å…¸å‹åœºæ™¯**ï¼š
  > "å¯¹æ¯” Vue å’Œ React æœ€è¿‘ä¸‰ä¸ªæœˆçš„æ´»è·ƒåº¦è¶‹åŠ¿"
  > "å¸®æˆ‘åˆ†æä¸€ä¸‹ pytorch ç›®å‰å­˜åœ¨çš„å®‰å…¨é£é™©"

### OpenSage å¯¹è¯ç¤ºä¾‹æ•ˆæœå›¾

![alt text](image/459f9919b57d53c5e86c0f8d72b8be17.png)

### 3. ğŸŒ± å¼€æºæ–°äººä¸ªæ€§åŒ–å¯¼èˆª (Onboarding)

ä¸“ä¸ºå¼€æºæ–°æ‰‹è®¾è®¡çš„æ¨èå¼•æ“ï¼Œè§£å†³â€œæƒ³è´¡çŒ®ä½†ä¸çŸ¥é“é€‰å“ªä¸ªé¡¹ç›®ã€åšä»€ä¹ˆä»»åŠ¡â€çš„ç—›ç‚¹ã€‚

- **ç®—æ³•é©±åŠ¨æ¨è**ï¼š
  åŸºäºç”¨æˆ·çš„ **æŠ€æœ¯æ ˆ**ã€**æ—¶é—´æŠ•å…¥** ä¸ **å…´è¶£é¢†åŸŸ**ï¼Œç»“åˆé¡¹ç›®çš„ **Readiness Score**ï¼ˆæ–°äººå‡†å¤‡åº¦ï¼‰ï¼Œè®¡ç®—æœ€ä½³åŒ¹é…åº¦ã€‚
  $$ \text{Match} = 0.55 \times \text{Fit} + 0.45 \times \text{Readiness} $$
- **å¯æ‰§è¡Œä»»åŠ¡æ¸…å•**ï¼š
  è‡ªåŠ¨æŒ–æ˜é¡¹ç›®ä¸­çš„ `good_first_issue` æˆ– `help_wanted` ä»»åŠ¡ï¼Œå¹¶ç”Ÿæˆå®šåˆ¶åŒ–çš„ **Onboarding Checklist**ï¼ˆç¯å¢ƒæ­å»ºã€æ–‡æ¡£é˜…è¯»ã€æµ‹è¯•è¿è¡Œï¼‰ï¼Œå¸®åŠ©æ–°äººå°† Ready-to-Code æ—¶é—´ç¼©çŸ­è‡³å‘¨çº§åˆ«ã€‚

[ğŸ“š æŸ¥çœ‹å®Œæ•´æ¨èç®—æ³•æ–‡æ¡£](knowledge_base/Recommendation_Algorithm.md)

### å¼€æºæ–°äººé¡¹ç›®ä¸ªæ€§åŒ–æ¨èæ¿å—æ•ˆæœå›¾

![alt text](image/5da92a201bb5ce4a6702ed687cd00dc7.png)
![alt text](image/a4aafa0a796cb8702033342db396ff62.png)

### 4. ğŸ“ˆ è¶‹åŠ¿åˆ†æä¸é£é™©é¢„è­¦

ä¸åªçœ‹ç°çŠ¶ï¼Œæ›´çœ‹æœªæ¥ã€‚ç³»ç»Ÿå¯¹å†å²æ—¶åºæ•°æ®è¿›è¡Œç»Ÿè®¡åˆ†æï¼Œè¯†åˆ«æ¼”å˜æ–¹å‘å¹¶é¢„è­¦æ½œåœ¨é£é™©ã€‚

- **è¶‹åŠ¿åˆ¤å®šç®—æ³•**ï¼š
  ä½¿ç”¨ **æœ€å°äºŒä¹˜æ³• (Least Squares)** çº¿æ€§å›å½’è®¡ç®—å…³é”®æŒ‡æ ‡ï¼ˆå¦‚ OpenRankã€å“åº”æ—¶é—´ï¼‰çš„æ–œç‡ $k$ï¼Œåˆ¤å®š Rising/Falling è¶‹åŠ¿ã€‚
  $$ k = \frac{N \sum xy - \sum x \sum y}{N \sum x^2 - (\sum x)^2} $$
- **å¼‚å¸¸æ£€æµ‹**ï¼š
  åŸºäº **Z-Score** è¯†åˆ«æ•°æ®çªå˜ï¼Œç»“åˆä¸šåŠ¡é˜ˆå€¼ï¼ˆå¦‚ "PR é¦–å“ > 48h"ã€"Top1 ä»½é¢ > 50%"ï¼‰è‡ªåŠ¨è§¦å‘é£é™©æç¤ºã€‚
- **å¯è§†åŒ–æŠ¥å‘Š**ï¼š
  ç”ŸæˆåŒ…å«è¶‹åŠ¿è§£è¯»ã€å¼‚å¸¸ç‚¹è¯Šæ–­å’Œæ”¹è¿›å»ºè®®çš„ç»¼åˆæ²»ç†æŠ¥å‘Šã€‚

[ğŸ“š æŸ¥çœ‹å®Œæ•´è¶‹åŠ¿åˆ†æç®—æ³•æ–‡æ¡£](knowledge_base/Trend_Analysis_Algorithm.md)

### è¶‹åŠ¿ç›‘æ§åŠ Agent åˆ†ææ¿å—æ•ˆæœå›¾

![alt text](image/f3466baa58dbf26d90605741897ea8a9.png)
![alt text](image/4ae8f043d7b0bbd60a436fe5041add5e.png)

---

## æŠ€æœ¯æ¶æ„

OpenSage é‡‡ç”¨ **å››å±‚æ™ºèƒ½æ¶æ„è®¾è®¡**ï¼Œå®ç°ä»è‡ªç„¶è¯­è¨€è¾“å…¥åˆ°æ²»ç†é—­ç¯çš„ç«¯åˆ°ç«¯æµè½¬ã€‚

### 1. ç”¨æˆ·äº¤äº’å±‚

- **Frontend**: Vite + React æä¾›æµç•…çš„èŠå¤©ç•Œé¢ä¸ Web å¯è§†åŒ–ã€‚
- **Interaction**: æ”¯æŒè‡ªç„¶è¯­è¨€å¤šè½®å¯¹è¯ä¸ DataEase å†…åµŒå¤§å±å±•ç¤ºã€‚

### 2. AI Agent å¼•æ“å±‚

- **Orchestrator**: åŸºäº BERT + LLM çš„æ„å›¾ç†è§£ä¸ä»»åŠ¡ç¼–æ’ã€‚
- **MetricEngine**: æ ¸å¿ƒç®—åˆ†å¼•æ“ï¼Œè´Ÿè´£æ•°æ®æ¸…æ´—ã€å½’ä¸€åŒ–ä¸äº”ç»´å¥åº·åˆ†è®¡ç®—ã€‚
- **Planner**: æ™ºèƒ½è·¯ç”±è°ƒåº¦ï¼Œæ ¹æ®ä»»åŠ¡ç±»å‹é€‰æ‹©æœ€çŸ­å·¥å…·è·¯å¾„ï¼ˆå®æ—¶æŸ¥è¯¢ vs é¢„è®¡ç®—ï¼‰ã€‚
- **OnboardingEngine**: é¢å‘å¼€æºæ–°äººï¼Œè®¡ç®— `Match = 0.55Ã—Fit + 0.45Ã—Readiness`ï¼Œç”Ÿæˆä¸ªæ€§åŒ–æ¨èä¸ä»»åŠ¡æ¸…å•ï¼ˆgood_first_issue / help_wantedï¼‰ã€‚
- **TrendMonitor**: é’ˆå¯¹ OpenRank/æ´»è·ƒåº¦/å“åº”æ—¶é—´ç­‰å…³é”®æ—¶åºæŒ‡æ ‡æ‰§è¡Œè¶‹åŠ¿åˆ¤å®šï¼ˆæœ€å°äºŒä¹˜æ–œç‡ kï¼‰ä¸å¼‚å¸¸æ£€æµ‹ï¼ˆZ-Scoreï¼‰ï¼Œè¾“å‡ºé£é™©é¢„è­¦ä¸é˜ˆå€¼å»ºè®®ã€‚

### 3. å·¥å…·ä¸æ•°æ®å±‚

- **Tools Integrations**:
  - **OpenDigger**: æ ¸å¿ƒæŒ‡æ ‡æ•°æ®æºã€‚
  - **GitHub API**: ç¤¾åŒºæ²»ç†æ¡£æ¡ˆä¸å®æ—¶ Issue çŠ¶æ€ã€‚
  - **OpenSSF Scorecard**: å®‰å…¨è¯„åˆ†æ•°æ®ã€‚
  - **DataEase**: BI å¯è§†åŒ–å¤§å±æ¸²æŸ“ã€‚
  - **MaxKB**: çŸ¥è¯†åº“/çŸ¥è¯†å¢å¼ºï¼ˆç­–ç•¥åº“ã€è§£é‡Šåº“ã€SOP æ¨¡æ¿ï¼‰ã€‚
- **Storage Strategy (å››çº§ç¼“å­˜)**:
  - **Memory/Redis**: çƒ­ç‚¹æŸ¥è¯¢ç§’çº§å“åº”ã€‚
  - **IoTDB**: æµ·é‡å†å²æ—¶åºæ•°æ®å­˜å‚¨ï¼Œæ”¯æŒè¶‹åŠ¿åˆ†æã€‚
  - **PostgreSQL**: ä¸šåŠ¡æ•°æ®ã€å¿«ç…§ä¸å†·æ•°æ®å½’æ¡£ã€‚

### 4. è¾“å‡ºå±‚

- å›¾æ–‡æŠ¥å‘Šï¼šç”Ÿæˆç»“æ„åŒ–çš„åˆ†ææŠ¥å‘Šä¸æ²»ç†ç»“è®ºï¼Œæ”¯æŒ Markdown/HTML è¾“å‡ºã€‚
- å¯è§†åŒ–å›¾è¡¨ï¼šè¶‹åŠ¿ã€å¯¹æ ‡ã€é›·è¾¾ç­‰å›¾è¡¨ï¼Œå¯åµŒå…¥ Web æˆ– DataEase å¤§å±ã€‚
- å¯æ‰§è¡Œå»ºè®®ï¼šç»“åˆ Evidence Card è¾“å‡ºæ²»ç†â€œå¤„æ–¹â€ï¼Œå«ä»»åŠ¡æ¸…å•ä¸é˜ˆå€¼å»ºè®®ã€‚
- å®æ—¶é¢„è­¦ï¼šç›‘æ§å…³é”®æŒ‡æ ‡å˜åŒ–ï¼Œè§¦å‘å‘Šè­¦å¹¶ç”¨äºè¿½è¸ªé—­ç¯ã€‚

---

## å®‰è£…éƒ¨ç½²

### ç¯å¢ƒè¦æ±‚

- Windows 10/11ï¼ˆå»ºè®®ï¼‰
- Docker Desktopï¼ˆç”¨äº PostgreSQLï¼‰
- Python 3.10+ï¼ˆåç«¯ï¼‰
- Node.js 18+ ä¸ npmï¼ˆå‰ç«¯ ui-reactï¼‰

### 1) å¯åŠ¨æ•°æ®åº“

```bash
docker compose -f docker-compose.db.yml up -d
```

### 2) å¯åŠ¨åç«¯ï¼ˆFastAPIï¼‰

```bash
cd backend
python -m venv .venv
.venv\Scripts\activate
python -m pip install -U pip setuptools wheel
pip install -r requirements.txt
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

å¯é€‰ï¼ˆå­˜åœ¨æ—¶ï¼‰ï¼š

```bash
backend\run_dev.bat
```

### 3) å¯åŠ¨å‰ç«¯ï¼ˆui-reactï¼‰

```bash
cd ui-react
npm install
npm run dev
```

å‰ç«¯é¢„è§ˆï¼šhttp://127.0.0.1:5173/

### 4) ä¸€é”®å®¹å™¨ï¼ˆå¯é€‰ï¼‰

```bash
docker compose up -d
```

åœæ­¢å¹¶æ¸…ç†ï¼š

```bash
docker compose down
```

---

## å¿«é€Ÿä½“éªŒ

- å¥åº·æ£€æŸ¥ï¼šGET http://127.0.0.1:8000/health
- æŒ‡æ ‡/é¢„æµ‹/å‘Šè­¦/ç»„åˆï¼šè§ backend/app/api ä¸‹çš„è·¯ç”±ï¼ˆmetrics.pyã€forecast.pyã€monitor.pyã€portfolio.pyï¼‰ã€‚
- å›¾åˆ†æï¼ˆå¯é€‰ï¼‰ï¼šbackend/app/api/graph.pyã€‚

---

## é¡¹ç›®ç»“æ„

```text
OpenSODA-OSS-Copilot/
â”œâ”€â”€ backend/                  # FastAPI + Agent ç¼–æ’ + ETL + ç›‘æ§
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py           # FastAPI å…¥å£
â”‚   â”‚   â”œâ”€â”€ api/              # health/metrics/forecast/monitor/portfolio/graph
â”‚   â”‚   â”œâ”€â”€ core/             # é…ç½®ä¸æ—¥å¿—
â”‚   â”‚   â”œâ”€â”€ db/               # SQLAlchemyã€æ¨¡å‹ä¸è¿ç§»
â”‚   â”‚   â”œâ”€â”€ jobs/             # APScheduler å®šæ—¶ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ tools/            # OpenDigger/DataEase/EasyGraph/LLM é€‚é…
â”‚   â”‚   â””â”€â”€ tests/            # å›å½’æµ‹è¯•
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ run_dev.bat           # Windows æœ¬åœ°å¼€å‘è„šæœ¬ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ ui-react/                 # React + Vite å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”œâ”€â”€ frontend/                 # å¦ä¸€ä¸ªè½»é‡å‰ç«¯ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ dashboards/               # DataEase æ•°æ®é›† SQL ä¸ README
â”œâ”€â”€ graph_lab/                # å›¾åˆ†æå®éªŒåŒºï¼ˆå¯é€‰åŠ åˆ†é¡¹ï¼‰
â”œâ”€â”€ scripts/                  # æ•°æ®ç§å­ä¸ ETL è„šæœ¬
â”œâ”€â”€ data/                     # demo ç»„åˆã€ç§å­ä¸ç¼“å­˜
â”œâ”€â”€ docker-compose.db.yml     # ä»…æ•°æ®åº“
â”œâ”€â”€ docker-compose.yml        # åç«¯ + DB + Redisï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ Makefile                  # make up/demo/downï¼ˆå¯é€‰ï¼‰
â””â”€â”€ README.md
```

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ LICENSEã€‚
